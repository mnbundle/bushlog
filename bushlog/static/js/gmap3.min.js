(function(t,e){var o,n=0;function i(){if(!o){o={verbose:false,queryLimit:{attempt:5,delay:250,random:250},classes:{Map:google.maps.Map,Marker:google.maps.Marker,InfoWindow:google.maps.InfoWindow,Circle:google.maps.Circle,Rectangle:google.maps.Rectangle,OverlayView:google.maps.OverlayView,StreetViewPanorama:google.maps.StreetViewPanorama,KmlLayer:google.maps.KmlLayer,TrafficLayer:google.maps.TrafficLayer,BicyclingLayer:google.maps.BicyclingLayer,GroundOverlay:google.maps.GroundOverlay,StyledMapType:google.maps.StyledMapType,ImageMapType:google.maps.ImageMapType},map:{mapTypeId:google.maps.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}}}}function s(t,o){return t!==e?t:"gmap3_"+(o?n+1:++n)}function a(e,o,n,i,s){if(o.todo.events||o.todo.onces){var a={id:i,data:o.todo.data,tag:o.todo.tag}}if(o.todo.events){t.each(o.todo.events,function(t,o){google.maps.event.addListener(n,t,function(t){o.apply(e,[s?s:n,t,a])})})}if(o.todo.onces){t.each(o.todo.onces,function(t,o){google.maps.event.addListenerOnce(n,t,function(t){o.apply(e,[s?s:n,t,a])})})}}function r(){var t=[];this.empty=function(){return!t.length};this.add=function(e){t.push(e)};this.get=function(){return t.length?t[0]:false};this.ack=function(){t.shift()}}function l(e,n,i){var s={},a=this,r,l={latLng:{map:false,marker:false,infowindow:false,circle:false,overlay:false,getlatlng:false,getmaxzoom:false,getelevation:false,streetviewpanorama:false,getaddress:true},geoloc:{getgeoloc:true}};if(typeof i==="string"){i=f(i)}function f(t){var e={};e[t]={};return e}function u(){var t;for(t in i){if(t in s){continue}return t}}this.run=function(){var a,f;while(a=u()){if(typeof e[a]==="function"){r=a;f=t.extend(true,{},o[a]||{},i[a].options||{});if(a in l.latLng){if(i[a].values){T(i[a].values,e,e[a],{todo:i[a],opts:f,session:s})}else{O(e,e[a],l.latLng[a],{todo:i[a],opts:f,session:s})}}else if(a in l.geoloc){E(e,e[a],{todo:i[a],opts:f,session:s})}else{e[a].apply(e,[{todo:i[a],opts:f,session:s}])}return}else{s[a]=null}}n.apply(e,[i,s])};this.ack=function(t){s[r]=t;a.run.apply(a,[])}}function f(t){var e,o=[];for(e in t){o.push(e)}return o}function u(e,o){var n={};if(e.todo){for(var i in e.todo){if(i!=="options"&&i!=="values"){n[i]=e.todo[i]}}}var s,a=["data","tag","id","events","onces"];for(s=0;s<a.length;s++){c(n,a[s],o,e.todo)}n.options=t.extend({},e.opts||{},o.options||{});return n}function c(t,e){for(var o=2;o<arguments.length;o++){if(e in arguments[o]){t[e]=arguments[o][e];return}}}function p(){var t=[];this.get=function(e){if(t.length){var o,n,i,s,a,r=f(e);for(o=0;o<t.length;o++){s=t[o];a=r.length==s.keys.length;for(n=0;n<r.length&&a;n++){i=r[n];a=i in s.request;if(a){if(typeof e[i]==="object"&&"equals"in e[i]&&typeof e[i]==="function"){a=e[i].equals(s.request[i])}else{a=e[i]===s.request[i]}}}if(a){return s.results}}}};this.store=function(e,o){t.push({request:e,keys:f(e),results:o})}}function d(e,n,i,s){var a=this,r=[];o.classes.OverlayView.call(this);this.setMap(e);this.onAdd=function(){var e=this.getPanes();if(n.pane in e){t(e[n.pane]).append(s)}t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(e,o){r.push(google.maps.event.addDomListener(s[0],o,function(e){t.Event(e).stopPropagation();google.maps.event.trigger(a,o,[e]);a.draw()}))});r.push(google.maps.event.addDomListener(s[0],"contextmenu",function(e){t.Event(e).stopPropagation();google.maps.event.trigger(a,"rightclick",[e]);a.draw()}))};this.getPosition=function(){return i};this.draw=function(){var t=this.getProjection().fromLatLngToDivPixel(i);s.css("left",t.x+n.offset.x+"px").css("top",t.y+n.offset.y+"px")};this.onRemove=function(){for(var t=0;t<r.length;t++){google.maps.event.removeListener(r[t])}s.remove()};this.hide=function(){s.hide()};this.show=function(){s.show()};this.toggle=function(){if(s){if(s.is(":visible")){this.show()}else{this.hide()}}};this.toggleDOM=function(){if(this.getMap()){this.setMap(null)}else{this.setMap(e)}};this.getDOMElement=function(){return s[0]}}function g(t){function e(){this.onAdd=function(){};this.onRemove=function(){};this.draw=function(){};return o.classes.OverlayView.apply(this,[])}e.prototype=o.classes.OverlayView.prototype;var n=new e;n.setMap(t);return n}function h(o,n,i,r){var l=false,f=false,u=false,c=false,p=true,d=this,h=[],m={},v={},y=[],w=[],L=[],b=g(n),M,x,k,I,B;P();this.getById=function(t){return t in v?y[v[t]]:false};this.clearById=function(t){if(t in v){var e=v[t];if(y[e]){y[e].setMap(null)}delete y[e];y[e]=false;delete w[e];w[e]=false;delete L[e];L[e]=false;delete v[t];f=true}};this.add=function(t,e){t.id=s(t.id);this.clearById(t.id);v[t.id]=y.length;y.push(null);w.push(t);L.push(e);f=true};this.addMarker=function(t,e){e=e||{};e.id=s(e.id);this.clearById(e.id);if(!e.options){e.options={}}e.options.position=t.getPosition();a(o,{todo:e},t,e.id);v[e.id]=y.length;y.push(t);w.push(e);L.push(e.data||{});f=true};this.todo=function(t){return w[t]};this.value=function(t){return L[t]};this.marker=function(t){return y[t]};this.setMarker=function(t,e){y[t]=e};this.store=function(t,e,o){m[t.ref]={obj:e,shadow:o}};this.free=function(){for(var e=0;e<h.length;e++){google.maps.event.removeListener(h[e])}h=[];t.each(m,function(t){S(t)});m={};t.each(w,function(t){w[t]=null});w=[];t.each(y,function(t){if(y[t]){y[t].setMap(null);delete y[t]}});y=[];t.each(L,function(t){delete L[t]});L=[];v={}};this.filter=function(t){k=t;_()};this.enable=function(t){if(p!=t){p=t;_()}};this.display=function(t){I=t};this.error=function(t){B=t};this.beginUpdate=function(){l=true};this.endUpdate=function(){l=false;if(f){_()}};this.autofit=function(t){for(var e=0;e<w.length;e++){if(w[e]){t.extend(w[e].options.position)}}};function P(){x=b.getProjection();if(!x){setTimeout(function(){P.apply(d,[])},25);return}c=true;h.push(google.maps.event.addListener(n,"zoom_changed",function(){E()}));h.push(google.maps.event.addListener(n,"bounds_changed",function(){E()}));_()}function S(t){if(typeof m[t]==="object"){if(typeof m[t].obj.setMap==="function"){m[t].obj.setMap(null)}if(typeof m[t].obj.remove==="function"){m[t].obj.remove()}if(typeof m[t].shadow.remove==="function"){m[t].obj.remove()}if(typeof m[t].shadow.setMap==="function"){m[t].shadow.setMap(null)}delete m[t].obj;delete m[t].shadow}else if(y[t]){y[t].setMap(null)}delete m[t]}function j(){var t,e,o,n,i,s,a,r;if(arguments[0]instanceof google.maps.LatLng){t=arguments[0].lat();o=arguments[0].lng();if(arguments[1]instanceof google.maps.LatLng){e=arguments[1].lat();n=arguments[1].lng()}else{e=arguments[1];n=arguments[2]}}else{t=arguments[0];o=arguments[1];if(arguments[2]instanceof google.maps.LatLng){e=arguments[2].lat();n=arguments[2].lng()}else{e=arguments[2];n=arguments[3]}}i=Math.PI*t/180;s=Math.PI*o/180;a=Math.PI*e/180;r=Math.PI*n/180;return 1e3*6371*Math.acos(Math.min(Math.cos(i)*Math.cos(a)*Math.cos(s)*Math.cos(r)+Math.cos(i)*Math.sin(s)*Math.cos(a)*Math.sin(r)+Math.sin(i)*Math.sin(a),1))}function O(){var t=j(n.getCenter(),n.getBounds().getNorthEast()),e=new google.maps.Circle({center:n.getCenter(),radius:1.25*t});return e.getBounds()}function T(){var t={},e;for(e in m){t[e]=true}return t}function E(){clearTimeout(M);M=setTimeout(function(){_()},25)}function C(t){var e=x.fromLatLngToDivPixel(t),o=x.fromDivPixelToLatLng(new google.maps.Point(e.x+i,e.y-i)),n=x.fromDivPixelToLatLng(new google.maps.Point(e.x-i,e.y+i));return new google.maps.LatLngBounds(n,o)}function _(){if(l||u||!c){return}var o=[],i={},s=n.getZoom(),a=r!==e&&s>r,d=T(),g,h,v,y,b,M,x,B=false,P,j;f=false;if(s>3){P=O();B=P.getSouthWest().lng()<P.getNorthEast().lng()}for(g=0;g<w.length;g++){if(w[g]&&(!B||P.contains(w[g].options.position))&&(!k||k(L[g]))){o.push(g)}}while(1){g=0;while(i[g]&&g<o.length){g++}if(g==o.length){break}M=[];if(p&&!a){do{x=M;M=[];if(x.length){y=b=0;for(v=0;v<x.length;v++){y+=w[o[x[v]]].options.position.lat();b+=w[o[x[v]]].options.position.lng()}y/=x.length;b/=x.length;P=C(new google.maps.LatLng(y,b))}else{P=C(w[o[g]].options.position)}for(h=g;h<o.length;h++){if(i[h]){continue}if(P.contains(w[o[h]].options.position)){M.push(h)}}}while(x.length<M.length&&M.length>1)}else{for(h=g;h<o.length;h++){if(i[h]){continue}M.push(h);break}}j={latLng:P.getCenter(),indexes:[],ref:[]};for(v=0;v<M.length;v++){i[M[v]]=true;j.indexes.push(o[M[v]]);j.ref.push(o[M[v]])}j.ref=j.ref.join("-");if(j.ref in d){delete d[j.ref]}else{if(M.length===1){m[j.ref]=true}(function(t){setTimeout(function(){I(t)},1)})(j)}}t.each(d,function(t){S(t)});u=false}}function m(t,e){this.id=function(){return t};this.filter=function(t){e.filter(t)};this.enable=function(){e.enable(true)};this.disable=function(){e.enable(false)};this.add=function(t,o,n){if(!n){e.beginUpdate()}e.addMarker(t,o);if(!n){e.endUpdate()}};this.getById=function(t){return e.getById(t)};this.clearById=function(t,o){if(!o){e.beginUpdate()}e.clearById(t);if(!o){e.endUpdate()}}}function v(){var o={},n={};function i(o){if(o){if(typeof o==="function"){return o}o=P(o);return function(n){if(n===e){return false}if(typeof n==="object"){for(var i=0;i<n.length;i++){if(t.inArray(n[i],o)>=0){return true}}return false}return t.inArray(n,o)>=0}}}function a(t){return{id:t.id,name:t.name,object:t.obj,tag:t.tag,data:t.data}}this.add=function(t,e,i,a){var r=t.todo||{},l=s(r.id);if(!o[e]){o[e]=[]}if(l in n){this.clearById(l)}n[l]={obj:i,sub:a,name:e,id:l,tag:r.tag,data:r.data};o[e].push(l);return l};this.getById=function(t,e,o){if(t in n){if(e){return n[t].sub}else if(o){return a(n[t])}return n[t].obj}return false};this.get=function(t,e,s,r){var l,f,u=i(s);if(!o[t]||!o[t].length){return null}l=o[t].length;while(l){l--;f=o[t][e?l:o[t].length-l-1];if(f&&n[f]){if(u&&!u(n[f].tag)){continue}return r?a(n[f]):n[f].obj}}return null};this.all=function(t,s,r){var l=[],f=i(s),u=function(t){var e,i;for(e=0;e<o[t].length;e++){i=o[t][e];if(i&&n[i]){if(f&&!f(n[i].tag)){continue}l.push(r?a(n[i]):n[i].obj)}}};if(t in o){u(t)}else if(t===e){for(t in o){u(t)}}return l};function r(t){if(typeof t.setMap==="function"){t.setMap(null)}if(typeof t.remove==="function"){t.remove()}if(typeof t.free==="function"){t.free()}t=null}this.rm=function(t,e,i){var s,a;if(!o[t]){return false}if(e){if(i){for(s=o[t].length-1;s>=0;s--){a=o[t][s];if(e(n[a].tag)){break}}}else{for(s=0;s<o[t].length;s++){a=o[t][s];if(e(n[a].tag)){break}}}}else{s=i?o[t].length-1:0}if(!(s in o[t])){return false}return this.clearById(o[t][s],s)};this.clearById=function(t,i){if(t in n){var s,a=n[t].name;for(s=0;i===e&&s<o[a].length;s++){if(t===o[a][s]){i=s}}r(n[t].obj);if(n[t].sub){r(n[t].sub)}delete n[t];o[a].splice(i,1);return true}return false};this.objGetById=function(t){var e;if(o["clusterer"]){for(var i in o["clusterer"]){if((e=n[o["clusterer"][i]].obj.getById(t))!==false){return e}}}return false};this.objClearById=function(t){if(o["clusterer"]){for(var e in o["clusterer"]){if(n[o["clusterer"][e]].obj.clearById(t)){return true}}}return null};this.clear=function(t,e,n,s){var a,r,l,f=i(s);if(!t||!t.length){t=[];for(a in o){t.push(a)}}else{t=P(t)}for(r=0;r<t.length;r++){if(t[r]){l=t[r];if(!o[l]){continue}if(e){this.rm(l,f,true)}else if(n){this.rm(l,f,false)}else{while(this.rm(l,f,false));}}}}}var y={},w=new p;function L(){if(!y.geocoder){y.geocoder=new google.maps.Geocoder}return y.geocoder}function b(){if(!y.directionsService){y.directionsService=new google.maps.DirectionsService}return y.directionsService}function M(){if(!y.elevationService){y.elevationService=new google.maps.ElevationService}return y.elevationService}function x(){if(!y.maxZoomService){y.maxZoomService=new google.maps.MaxZoomService}return y.maxZoomService}function k(){if(!y.distanceMatrixService){y.distanceMatrixService=new google.maps.DistanceMatrixService}return y.distanceMatrixService}function I(){if(o.verbose){var t,e=[];if(window.console&&typeof console.error==="function"){for(t=0;t<arguments.length;t++){e.push(arguments[t])}console.error.apply(console,e)}else{e="";for(t=0;t<arguments.length;t++){e+=arguments[t].toString()+" "}alert(e)}}}function B(t){return(typeof t==="number"||typeof t==="string")&&t!==""&&!isNaN(t)}function P(t){var o,n=[];if(t!==e){if(typeof t==="object"){if(typeof t.length==="number"){n=t}else{for(o in t){n.push(t[o])}}}else{n.push(t)}}return n}function S(e,o,n){var i=o?e:null;if(!e||typeof e==="string"){return i}if(e.latLng){return S(e.latLng)}if(e instanceof google.maps.LatLng){return e}else if(B(e.lat)){return new google.maps.LatLng(e.lat,e.lng)}else if(!n&&t.isArray(e)){if(!B(e[0])||!B(e[1])){return i}return new google.maps.LatLng(e[0],e[1])}return i}function j(e){var o,n;if(!e||e instanceof google.maps.LatLngBounds){return e||null}if(t.isArray(e)){if(e.length==2){o=S(e[0]);n=S(e[1])}else if(e.length==4){o=S([e[0],e[1]]);n=S([e[2],e[3]])}}else{if("ne"in e&&"sw"in e){o=S(e.ne);n=S(e.sw)}else if("n"in e&&"e"in e&&"s"in e&&"w"in e){o=S([e.n,e.e]);n=S([e.s,e.w])}}if(o&&n){return new google.maps.LatLngBounds(n,o)}return null}function O(t,e,n,i,s){var a=n?S(i.todo,false,true):false,r=a?{latLng:a}:i.todo.address?typeof i.todo.address==="string"?{address:i.todo.address}:i.todo.address:false,l=r?w.get(r):false,f=this;if(r){s=s||0;if(l){i.latLng=l.results[0].geometry.location;i.results=l.results;i.status=l.status;e.apply(t,[i])}else{if(r.location){r.location=S(r.location)}if(r.bounds){r.bounds=j(r.bounds)}L().geocode(r,function(a,l){if(l===google.maps.GeocoderStatus.OK){w.store(r,{results:a,status:l});i.latLng=a[0].geometry.location;i.results=a;i.status=l;e.apply(t,[i])}else if(l===google.maps.GeocoderStatus.OVER_QUERY_LIMIT&&s<o.queryLimit.attempt){setTimeout(function(){O.apply(f,[t,e,n,i,s+1])},o.queryLimit.delay+Math.floor(Math.random()*o.queryLimit.random))}else{I("geocode failed",l,r);i.latLng=i.results=false;i.status=l;e.apply(t,[i])}})}}else{i.latLng=S(i.todo,false,true);e.apply(t,[i])}}function T(e,o,n,i){var s=this,a=-1;function r(){do{a++}while(a<e.length&&!("address"in e[a]));if(a>=e.length){n.apply(o,[i]);return}O(s,function(o){delete o.todo;t.extend(e[a],o);r.apply(s,[])},true,{todo:e[a]})}r()}function E(t,e,o){var n=false;if(navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(function(i){if(n){return}n=true;o.latLng=new google.maps.LatLng(i.coords.latitude,i.coords.longitude);e.apply(t,[o])},function(){if(n){return}n=true;o.latLng=false;e.apply(t,[o])},o.opts.getCurrentPosition)}else{o.latLng=false;e.apply(t,[o])}}function C(n){var i=this,f=new r,c=new v,p=null,g;this._plan=function(t){for(var e=0;e<t.length;e++){f.add(new l(i,w,t[e]))}y()};function y(){if(!g&&(g=f.get())){g.run()}}function w(){g=null;f.ack();y.call(i)}function L(e){var o,i=[];for(o=1;o<arguments.length;o++){i.push(arguments[o])}if(typeof e.todo.callback==="function"){e.todo.callback.apply(n,i)}else if(typeof e.todo.callback==="object"){t.each(e.todo.callback,function(t,e){if(typeof e==="function"){e.apply(n,i)}})}}function B(t,e,o){if(o){a(n,t,e,o)}L(t,e);g.ack(e)}function O(e,i){i=i||{};if(p){if(i.todo&&i.todo.options){p.setOptions(i.todo.options)}}else{var s=i.opts||t.extend(true,{},o.map,i.todo&&i.todo.options?i.todo.options:{});s.center=e||S(s.center);p=new o.classes.Map(n.get(0),s)}}this.map=function(t){O(t.latLng,t);a(n,t,p);B(t,p)};this.destroy=function(t){c.clear();n.empty();if(p){p=null}B(t,true)};this.infowindow=function(i){var s=[],r="values"in i.todo;if(!r){if(i.latLng){i.opts.position=i.latLng}else if(i.opts.position){i.opts.position=S(i.opts.position)}i.todo.values=[{options:i.opts}]}t.each(i.todo.values,function(t,l){var f,d,g=u(i,l);if(!p){O(g.options.position)}d=new o.classes.InfoWindow(g.options);if(d&&(g.open===e||g.open)){if(r){d.open(p,g.anchor?g.anchor:e)}else{d.open(p,g.anchor?g.anchor:i.latLng?e:i.session.marker?i.session.marker:e)}}s.push(d);f=c.add({todo:g},"infowindow",d);a(n,{todo:g},d,f)});B(i,r?s:s[0])};this.circle=function(e){var i=[],s="values"in e.todo;if(!s){e.opts.center=e.latLng||S(e.opts.center);e.todo.values=[{options:e.opts}]}if(!e.todo.values.length){B(e,false);return}t.each(e.todo.values,function(t,s){var r,l,f=u(e,s);f.options.center=f.options.center?S(f.options.center):S(s);if(!p){O(f.options.center)}f.options.map=p;l=new o.classes.Circle(f.options);i.push(l);r=c.add({todo:f},"circle",l);a(n,{todo:f},l,r)});B(e,s?i:i[0])};this.overlay=function(e,i){var s=[],r="values"in e.todo;if(!r){e.todo.values=[{latLng:e.latLng,options:e.opts}]}if(!e.todo.values.length){B(e,false);return}if(!d.__initialised){d.prototype=new o.classes.OverlayView;d.__initialised=true}t.each(e.todo.values,function(o,r){var l,f,g=u(e,r),h=t(document.createElement("div")).css({border:"none",borderWidth:"0px",position:"absolute"});h.append(g.options.content);f=new d(p,g.options,S(g)||S(r),h);s.push(f);h=null;if(!i){l=c.add(e,"overlay",f);a(n,{todo:g},f,l)}});if(i){return s[0]}B(e,r?s:s[0])};this.getaddress=function(t){L(t,t.results,t.status);g.ack()};this.getlatlng=function(t){L(t,t.results,t.status);g.ack()};this.getmaxzoom=function(t){x().getMaxZoomAtLatLng(t.latLng,function(e){L(t,e.status===google.maps.MaxZoomStatus.OK?e.zoom:false,status);g.ack()})};this.getelevation=function(t){var e,o=[],n=function(e,o){L(t,o===google.maps.ElevationStatus.OK?e:false,o);g.ack()};if(t.latLng){o.push(t.latLng)}else{o=P(t.todo.locations||[]);for(e=0;e<o.length;e++){o[e]=S(o[e])}}if(o.length){M().getElevationForLocations({locations:o},n)}else{if(t.todo.path&&t.todo.path.length){for(e=0;e<t.todo.path.length;e++){o.push(S(t.todo.path[e]))}}if(o.length){M().getElevationAlongPath({path:o,samples:t.todo.samples},n)}else{g.ack()}}};this.defaults=function(e){t.each(e.todo,function(e,n){if(typeof o[e]==="object"){o[e]=t.extend({},o[e],n)}else{o[e]=n}});g.ack(true)};this.rectangle=function(e){var i=[],s="values"in e.todo;if(!s){e.todo.values=[{options:e.opts}]}if(!e.todo.values.length){B(e,false);return}t.each(e.todo.values,function(t,s){var r,l,f=u(e,s);f.options.bounds=f.options.bounds?j(f.options.bounds):j(s);if(!p){O(f.options.bounds.getCenter())}f.options.map=p;l=new o.classes.Rectangle(f.options);i.push(l);r=c.add({todo:f},"rectangle",l);a(n,{todo:f},l,r)});B(e,s?i:i[0])};function T(e,o,i){var s=[],r="values"in e.todo;if(!r){e.todo.values=[{options:e.opts}]}if(!e.todo.values.length){B(e,false);return}O();t.each(e.todo.values,function(r,l){var f,d,g,h,m=u(e,l);if(m.options[i]){if(m.options[i][0][0]&&t.isArray(m.options[i][0][0])){for(d=0;d<m.options[i].length;d++){for(g=0;g<m.options[i][d].length;g++){m.options[i][d][g]=S(m.options[i][d][g])}}}else{for(d=0;d<m.options[i].length;d++){m.options[i][d]=S(m.options[i][d])}}}m.options.map=p;h=new google.maps[o](m.options);s.push(h);f=c.add({todo:m},o.toLowerCase(),h);a(n,{todo:m},h,f)});B(e,r?s:s[0])}this.polyline=function(t){T(t,"Polyline","path")};this.polygon=function(t){T(t,"Polygon","paths")};this.trafficlayer=function(t){O();var e=c.get("trafficlayer");if(!e){e=new o.classes.TrafficLayer;e.setMap(p);c.add(t,"trafficlayer",e)}B(t,e)};this.bicyclinglayer=function(t){O();var e=c.get("bicyclinglayer");if(!e){e=new o.classes.BicyclingLayer;e.setMap(p);c.add(t,"bicyclinglayer",e)}B(t,e)};this.groundoverlay=function(t){t.opts.bounds=j(t.opts.bounds);if(t.opts.bounds){O(t.opts.bounds.getCenter())}var e,n=new o.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);n.setMap(p);e=c.add(t,"groundoverlay",n);B(t,n,e)};this.streetviewpanorama=function(e){if(!e.opts.opts){e.opts.opts={}}if(e.latLng){e.opts.opts.position=e.latLng}else if(e.opts.opts.position){e.opts.opts.position=S(e.opts.opts.position)}if(e.todo.divId){e.opts.container=document.getElementById(e.todo.divId)}else if(e.opts.container){e.opts.container=t(e.opts.container).get(0)}var n,i=new o.classes.StreetViewPanorama(e.opts.container,e.opts.opts);if(i){p.setStreetView(i)}n=c.add(e,"streetviewpanorama",i);B(e,i,n)};this.kmllayer=function(e){var i=[],s="values"in e.todo;if(!s){e.todo.values=[{options:e.opts}]}if(!e.todo.values.length){B(e,false);return}t.each(e.todo.values,function(t,s){var r,l,f=u(e,s);if(!p){O()}f.options.opts.map=p;l=new o.classes.KmlLayer(f.options.url,f.options.opts);i.push(l);r=c.add({todo:f},"kmllayer",l);a(n,{todo:f},l,r)});B(e,s?i:i[0])};this.panel=function(o){O();var i,s=0,a=0,r,l=t(document.createElement("div"));l.css({position:"absolute",zIndex:1e3,visibility:"hidden"});if(o.opts.content){r=t(o.opts.content);l.append(r);n.first().prepend(l);if(o.opts.left!==e){s=o.opts.left}else if(o.opts.right!==e){s=n.width()-r.width()-o.opts.right}else if(o.opts.center){s=(n.width()-r.width())/2}if(o.opts.top!==e){a=o.opts.top}else if(o.opts.bottom!==e){a=n.height()-r.height()-o.opts.bottom}else if(o.opts.middle){a=(n.height()-r.height())/2}l.css({top:a,left:s,visibility:"visible"})}i=c.add(o,"panel",l);B(o,l,i);l=null};function E(s){var r=new h(n,p,s.radius,s.maxZoom),l={},f={},u=/^[0-9]+$/,c,d;for(d in s){if(u.test(d)){f[d]=s[d];f[d].width=f[d].width||0;f[d].height=f[d].height||0}else{l[d]=s[d]}}if(l.calculator){c=function(e){var o=[];t.each(e,function(t,e){o.push(r.value(e))});return l.calculator.apply(n,[o])}}else{c=function(t){return t.length}}r.error(function(){I.apply(i,arguments)});r.display(function(s){var u,d,g=0,h,m,v,y=c(s.indexes);if(y>1){for(u in f){u=1*u;if(u>g&&u<=y){g=u}}d=f[g]}if(d){v=d.offset||[-d.width/2,-d.height/2];h=t.extend({},l);h.options=t.extend({pane:"overlayLayer",content:d.content?d.content.replace("CLUSTER_COUNT",y):"",offset:{x:("x"in v?v.x:v[0])||0,y:("y"in v?v.y:v[1])||0}},l.options||{});m=i.overlay({todo:h,opts:h.options,latLng:S(s)},true);h.options.pane="floatShadow";h.options.content=t(document.createElement("div")).width(d.width+"px").height(d.height+"px");shadow=i.overlay({todo:h,opts:h.options,latLng:S(s)},true);l.data={latLng:S(s),markers:[]};t.each(s.indexes,function(t,e){l.data.markers.push(r.value(e));if(r.marker(e)){r.marker(e).setMap(null)}});a(n,{todo:l},shadow,e,{main:m,shadow:shadow});r.store(s,m,shadow)}else{t.each(s.indexes,function(t,e){if(r.marker(e)){r.marker(e).setMap(p)}else{var i=r.todo(e),s=new o.classes.Marker(i.options);r.setMarker(e,s);a(n,{todo:i},s,i.id)}})}});return r}this.marker=function(e){var r="values"in e.todo,l=!p;if(!r){e.opts.position=e.latLng||S(e.opts.position);e.todo.values=[{options:e.opts}]}if(!e.todo.values.length){B(e,false);return}if(l){O()}if(e.todo.cluster&&!p.getBounds()){google.maps.event.addListenerOnce(p,"bounds_changed",function(){i.marker.apply(i,[e])});return}if(e.todo.cluster){var f,d;if(e.todo.cluster instanceof m){f=e.todo.cluster;d=c.getById(f.id(),true)}else{d=E(e.todo.cluster);f=new m(s(e.todo.id,true),d);c.add(e,"clusterer",f,d)}d.beginUpdate();t.each(e.todo.values,function(t,o){var n=u(e,o);n.options.position=n.options.position?S(n.options.position):S(o);n.options.map=p;if(l){p.setCenter(n.options.position);l=false}d.add(n,o)});d.endUpdate();B(e,f)}else{var g=[];t.each(e.todo.values,function(t,i){var s,r,f=u(e,i);f.options.position=f.options.position?S(f.options.position):S(i);f.options.map=p;if(l){p.setCenter(f.options.position);l=false}r=new o.classes.Marker(f.options);g.push(r);s=c.add({todo:f},"marker",r);a(n,{todo:f},r,s)});B(e,r?g:g[0])}};this.getroute=function(t){t.opts.origin=S(t.opts.origin,true);t.opts.destination=S(t.opts.destination,true);b().route(t.opts,function(e,o){L(t,o==google.maps.DirectionsStatus.OK?e:false,o);g.ack()})};this.directionsrenderer=function(e){e.opts.map=p;var o,n=new google.maps.DirectionsRenderer(e.opts);if(e.todo.divId){n.setPanel(document.getElementById(e.todo.divId))}else if(e.todo.container){n.setPanel(t(e.todo.container).get(0))}o=c.add(e,"directionrenderer",n);B(e,n,o)};this.getgeoloc=function(t){B(t,t.latLng)};this.styledmaptype=function(t){O();var e=new o.classes.StyledMapType(t.todo.styles,t.opts);p.mapTypes.set(t.todo.id,e);B(t,e)};this.imagemaptype=function(t){O();var e=new o.classes.ImageMapType(t.opts);p.mapTypes.set(t.todo.id,e);B(t,e)};this.autofit=function(e){var o=new google.maps.LatLngBounds;t.each(c.all(),function(t,e){if(e.getPosition){o.extend(e.getPosition())}else if(e.getBounds){o.extend(e.getBounds().getNorthEast());o.extend(e.getBounds().getSouthWest())}else if(e.getPaths){e.getPaths().forEach(function(t){t.forEach(function(t){o.extend(t)})})}else if(e.getPath){e.getPath().forEach(function(t){o.extend(t);""})}else if(e.getCenter){o.extend(e.getCenter())}else if(e instanceof m){e=c.getById(e.id(),true);if(e){e.autofit(o)}}});if(!o.isEmpty()&&(!p.getBounds()||!p.getBounds().equals(o))){if("maxZoom"in e.todo){google.maps.event.addListenerOnce(p,"bounds_changed",function(){if(this.getZoom()>e.todo.maxZoom){this.setZoom(e.todo.maxZoom)}})}p.fitBounds(o)}B(e,true)};this.clear=function(e){if(typeof e.todo==="string"){if(c.clearById(e.todo)||c.objClearById(e.todo)){B(e,true);return}e.todo={name:e.todo}}if(e.todo.id){t.each(P(e.todo.id),function(t,e){c.clearById(e)})}else{c.clear(P(e.todo.name),e.todo.last,e.todo.first,e.todo.tag)}B(e,true)};this.exec=function(e){var o=this;t.each(P(e.todo.func),function(i,s){t.each(o.get(e.todo,true,e.todo.hasOwnProperty("full")?e.todo.full:true),function(t,e){s.call(n,e)})});B(e,true)};this.get=function(o,n,i){var s,a,r=n?o:o.todo;if(!n){i=r.full}if(typeof r==="string"){a=c.getById(r,false,i)||c.objGetById(r);if(a===false){s=r;r={}}}else{s=r.name}if(s==="map"){a=p}if(!a){a=[];if(r.id){t.each(P(r.id),function(t,e){a.push(c.getById(e,false,i)||c.objGetById(e))});if(!t.isArray(r.id)){a=a[0]}}else{t.each(s?P(s):[e],function(e,o){var n;if(r.first){n=c.get(o,false,r.tag,i);if(n)a.push(n)}else if(r.all){t.each(c.all(o,r.tag,i),function(t,e){a.push(e)})}else{n=c.get(o,true,r.tag,i);if(n)a.push(n)}});if(!r.all&&!t.isArray(s)){a=a[0]}}}a=t.isArray(a)||!r.all?a:[a];if(n){return a}else{B(o,a)}};this.getdistance=function(t){var e;t.opts.origins=P(t.opts.origins);for(e=0;e<t.opts.origins.length;e++){t.opts.origins[e]=S(t.opts.origins[e],true)}t.opts.destinations=P(t.opts.destinations);for(e=0;e<t.opts.destinations.length;e++){t.opts.destinations[e]=S(t.opts.destinations[e],true)}k().getDistanceMatrix(t.opts,function(e,o){L(t,o===google.maps.DistanceMatrixStatus.OK?e:false,o);g.ack()})};this.trigger=function(e){if(typeof e.todo==="string"){google.maps.event.trigger(p,e.todo)}else{var o=[p,e.todo.eventName];if(e.todo.var_args){t.each(e.todo.var_args,function(t,e){o.push(e)})}google.maps.event.trigger.apply(google.maps.event,o)}L(e);g.ack()}}function _(t){var e;if(!typeof t==="object"||!t.hasOwnProperty("get")){return false}for(e in t){if(e!=="get"){return false}}return!t.get.hasOwnProperty("callback")}t.fn.gmap3=function(){var e,o=[],n=true,s=[];i();for(e=0;e<arguments.length;e++){if(arguments[e]){o.push(arguments[e])}}if(!o.length){o.push("map")}t.each(this,function(){var e=t(this),i=e.data("gmap3");n=false;if(!i){i=new C(e);e.data("gmap3",i)}if(o.length===1&&(o[0]==="get"||_(o[0]))){s.push(i.get(o[0]==="get"?"map":o[0].get,true))}else{i._plan(o)}});if(s.length){if(s.length===1){return s[0]}else{return s}}return this}})(jQuery);