{% extends "base.html" %}

{% block title %}{{ object.user.username|capfirst }}'s Bushlog{% endblock %}

{% block decription %}{{ object.user.username|capfirst }}'s Bushlog - Wildlife Sightings in Southern Africa.{% endblock %}

{% load sighting %}

{% block content %}

    {% if request.user == object.user %}
        {% sighting_map protected=0 limit=20 user=object.user %}
    {% else %}
        {% sighting_map limit=20 user=object.user %}
    {% endif %}

    <div class="row-fluid">
        <div class="span8 hidden-phone">
            <div class="page-header">
                <h2>
                    {{ object.user.username|capfirst }}'s Bushlog

                    {% if request.user.is_authenticated %}
                        <a class="btn btn-success btn-header pull-right" href="#id_new_sighting" data-toggle="modal">
                            <i class="icon-plus icon-white"></i> &nbsp;Add New Sighting
                        </a>
                    {% else %}
                        <a class="btn btn-success btn-header pull-right" href="#id_signup_modal" data-toggle="modal">
                            <i class="icon-plus icon-white"></i> &nbsp;Add New Sighting
                        </a>
                    {% endif %}

                </h2>
            </div>

            {% if request.user == object.user %}
                {% latest_sightings protected=0 split=2 limit=20 user=object.user %}
            {% else %}
                {% latest_sightings split=2 limit=20 user=object.user %}
            {% endif %}
        </div>

        <div class="span8 visible-phone">
            <div class="media">
                {% if object.user.profile.avatar %}
                    {% if request.user == object.user %}
                        <a href="{% url 'profile:forms' 'avatar' %}" class="hint pull-left" rel="tooltip" title="Update&nbsp;Avatar" data-placement="top">
                            <img class="media-object img-rounded" src="{% resize_image object.user.profile.avatar 60 60 %}" width="60" height="60" />
                        </a>
                    {% else %}
                        <img class="media-object img-rounded pull-left" src="{% resize_image object.user.profile.avatar 60 60 %}" width="60" height="60" />
                    {% endif %}
                {% else %}
                    {% if request.user == object.user %}
                        <a href="{% url 'profile:forms' 'avatar' %}" class="hint pull-left" rel="tooltip" title="Add&nbsp;Avatar" data-placement="top">
                            <img class="media-object img-rounded" src="{{ STATIC_URL }}img/layout/profile-{{ object.gender|default:"male"|lower }}.png" width="60" height="60" />
                        </a>
                    {% else %}
                        <img class="media-object img-rounded pull-left" src="{{ STATIC_URL }}img/layout/profile-{{ object.gender|default:"male"|lower }}.png" width="60" height="60" />
                    {% endif %}
                {% endif %}
                <div class="media-body">
                    <h6>
                        <a href="{% url 'profile:index' object.user.profile.slug %}">{{ object.user.username|capfirst }}'s Bushlog</a><br/>
                        <i class="icon-map-marker"></i>
                        <small>{{ object.country }}</small>
                    </h6>
                </div>
            </div>

            <div>
                <small>{{ object.biography|default:"" }}</small>
            </div>

            <hr/>

            {% if request.user == object.user %}
                {% latest_sightings protected=0 split=2 limit=10 user=object.user %}
            {% else %}
                {% latest_sightings split=2 limit=10 user=object.user %}
            {% endif %}

        </div>

        <div class="span3 pull-right hidden-phone">
            <div class="media">
                {% if object.user.profile.avatar %}
                    {% if request.user == object.user %}
                        <a href="#id_avatar_modal" data-toggle="modal" class="hint pull-left" rel="tooltip" title="Update&nbsp;Avatar" data-placement="top">
                            <img class="media-object img-rounded" src="{% resize_image object.user.profile.avatar 60 60 %}" width="60" height="60" />
                        </a>
                    {% else %}
                        <img class="media-object img-rounded pull-left" src="{% resize_image object.user.profile.avatar 60 60 %}" width="60" height="60" />
                    {% endif %}
                {% else %}
                    {% if request.user == object.user %}
                        <a href="#id_avatar_modal" data-toggle="modal" class="hint pull-left" rel="tooltip" title="Add&nbsp;Avatar" data-placement="top">
                            <img class="media-object img-rounded" src="{{ STATIC_URL }}img/layout/profile-{{ object.gender|default:"male"|lower }}.png" width="60" height="60" />
                        </a>
                    {% else %}
                        <img class="media-object img-rounded pull-left" src="{{ STATIC_URL }}img/layout/profile-{{ object.gender|default:"male"|lower }}.png" width="60" height="60" />
                    {% endif %}
                {% endif %}
                <div class="media-body">
                    <h6>
                        <a href="{% url 'profile:index' object.user.profile.slug %}">{{ object.user.username }}</a><br/>
                        <i class="icon-map-marker"></i>
                        <small>{{ object.country }}</small>
                    </h6>
                </div>
            </div>
            {% if object.biography %}
                <hr/>
                <div>
                    <small>{{ object.biography|default:"" }}</small>
                </div>
            {% endif %}

        </div>
    </div>
{% endblock %}
