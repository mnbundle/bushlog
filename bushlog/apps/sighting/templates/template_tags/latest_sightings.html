{% load sighting %}

{% if split %}
    {% for object in object_list %}
        {% if forloop.first %}
            <div class="row-fluid">
        {% endif %}
                <div class="span4">
                    <div class=" media">
                        {% if object.cover_image %}
                            <a class="pull-left" href="{{ object.get_absolute_url }}">
                                <img class="media-object img-rounded" src="{% resize_image object.cover_image 50 50 %}" width="50" height="50" />
                            </a>
                        {% else %}
                            <a class="pull-left" href="{{ object.get_absolute_url }}">
                                <img class="media-object img-rounded lightest" src="{% resize_image object.species.default_image 50 50 %}" width="50" height="50" />
                            </a>
                        {% endif %}
                        <div class="media-body">
                            <h6>
                                <a href="{% url profile:index object.user.profile.slug %}">{{ object.user.username }}</a>
                                <small> added a new sighting of a </small>
                                <a href="{{ object.species.get_absolute_url }}">{{ object.species.common_name }}</a>
                                <small> in the </small>
                                <a href="{{ object.reserve.get_absolute_url }}">{{ object.reserve.name }}</a>
                                <small>
                                    {{ object.date_of_sighting.date|fuzzy_date }}
                                     -
                                    <a href="{{ object.get_absolute_url }}">
                                        <strong>view sighting</strong>
                                    </a>
                                </small>
                            </h6>
                        </div>
                    </div>
                </div>
        {% if forloop.counter|divisibleby:3 %}
            </div>
            <div class="spacer"></div>
            <div class="row-fluid">
        {% endif %}
    {% endfor %}
    </div>
{% else %}
    {% for object in object_list %}
        <div class="row span8">
            <div class=" media">
                {% if object.cover_image %}
                    <a class="pull-left" href="{{ object.get_absolute_url }}">
                        <img class="media-object img-rounded" src="{% resize_image object.cover_image 50 50 %}" width="50" height="50" />
                    </a>
                {% else %}
                    <a class="pull-left" href="{{ object.get_absolute_url }}">
                        <img class="media-object img-rounded lightest" src="{% resize_image object.species.default_image 50 50 %}" width="50" height="50" />
                    </a>
                {% endif %}
                <div class="media-body">
                    <h6>
                        <a href="{% url profile:index object.user.profile.slug %}">{{ object.user.username }}</a>
                        <small> added a new sighting of a </small>
                        <a href="{{ object.species.get_absolute_url }}">{{ object.species.common_name }}</a>
                        <small> in the </small>
                        <a href="{{ object.reserve.get_absolute_url }}">{{ object.reserve.name }}</a>
                        <small>
                            {{ object.date_of_sighting.date|fuzzy_date }}
                             -
                            <a href="{{ object.get_absolute_url }}">
                                <strong>view sighting</strong>
                            </a>
                        </small>
                    </h6>
                </div>
            </div>
            <div>&nbsp;</div>
        </div>
    {% endfor %}
{% endif %}
